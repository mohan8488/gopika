{{ define "main" }}
<p style="color:red;">Contact block loaded!</p>
<section class="contact-blox">
  {{ with .Params.content.title }}
    <h2>{{ . }}</h2>
  {{ end }}

  {{ with .Params.content.text }}
    <p>{{ . | markdownify }}</p>
  {{ end }}

  <div class="contact-info">
    {{ with .Params.content.email }}
      <p><strong>Email:</strong> 
        {{ if $.Params.content.autolink }}
          <a href="mailto:{{ . }}">{{ . }}</a>
        {{ else }}{{ . }}{{ end }}
      </p>
    {{ end }}

    {{ with .Params.content.phone }}
      <p><strong>Phone:</strong> 
        {{ if $.Params.content.autolink }}
          <a href="tel:{{ replace . " " "" }}">{{ . }}</a>
        {{ else }}{{ . }}{{ end }}
      </p>
    {{ end }}

    {{ with .Params.content.appointment_url }}
      <p><strong>Appointment:</strong> <a href="{{ . }}" target="_blank" rel="noopener">Schedule here</a></p>
    {{ end }}

    {{ with .Params.content.address }}
      <p><strong>Address:</strong><br>
        {{ .street }}<br>
        {{ .city }}, {{ .region }} {{ .postcode }}<br>
        {{ .country }}
      </p>
    {{ end }}

    {{ with .Params.content.directions }}
      <p><strong>Directions:</strong> {{ . }}</p>
    {{ end }}

    {{ with .Params.content.office_hours }}
      <strong>Office Hours:</strong>
      <ul>
        {{ range . }}
          <li>{{ . }}</li>
        {{ end }}
      </ul>
    {{ end }}

    {{ with .Params.content.coordinates }}
      <div class="map-container">
        <iframe
          width="100%" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
          src="https://maps.google.com/maps?q={{ .latitude }},{{ .longitude }}&hl=en&z=15&output=embed"
        ></iframe>
      </div>
    {{ end }}
  </div>

  {{ with .Params.content.form }}
    {{ if eq .provider "netlify" }}
    <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field">
      <input type="hidden" name="form-name" value="contact" />
      <p hidden><label>Donâ€™t fill this out: <input name="bot-field" /></label></p>
      <p><label>Your Name: <input type="text" name="name" required></label></p>
      <p><label>Your Email: <input type="email" name="email" required></label></p>
      <p><label>Message: <textarea name="message" required></textarea></label></p>
      <p><button type="submit">Send</button></p>
    </form>
    {{ end }}
  {{ end }}
</section>
{{ end }}
